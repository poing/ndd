var postdata = [
  {
    "id": "5c58de8d294892e8b4894f60",
    "index": false,
    "item": "Proident ea sunt cillum aliquip nisi est sit consequat.",
    "project": "in",
    "company": "Cipromox",
    "user": 430,
    "datetime": "Fri Dec 03 1982 06:43:28 GMT+0900 (Japan Standard Time)",
    "comments": [
      {
        "comment": "Minim esse ex tempor magna amet veniam consectetur. Dolor est eu proident qui ut aute commodo do ad labore. Eu laborum enim anim et in. Aliqua et dolore dolor aute magna laboris culpa nostrud ut elit. Et labore minim cupidatat veniam proident ullamco enim quis aliqua cupidatat. Id elit aliqua cillum cillum Lorem incididunt excepteur excepteur eiusmod mollit.\r\n",
        "user": 430,
        "datetime": "Fri May 05 1989 08:45:56 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Pariatur aliquip commodo proident aliquip labore adipisicing do excepteur dolor est ipsum ipsum labore. Velit ad est velit nulla laborum. Dolore in ipsum tempor proident sit labore eu excepteur quis est cupidatat commodo nisi labore. Anim ut reprehenderit ullamco labore aute elit nisi velit excepteur pariatur adipisicing irure id non. Labore laborum voluptate magna mollit culpa ullamco labore enim reprehenderit ex laborum est eu quis. Officia eiusmod proident qui dolore sunt exercitation sunt laborum aliquip eu minim et. Ex ipsum in labore cillum adipisicing minim in in excepteur.\r\n",
        "user": 951,
        "datetime": "Mon Aug 24 2015 20:16:36 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Quis minim elit velit aute officia elit ipsum. Laboris ex Lorem culpa nostrud sunt ea eiusmod fugiat amet. Officia laboris incididunt tempor aute cupidatat minim ad culpa esse consectetur ea ut. Eiusmod mollit labore cupidatat elit sint et cillum. Minim quis ullamco non aliqua proident sunt ipsum in. Ea aliqua dolor exercitation proident ullamco aliquip excepteur minim culpa aute. Id nostrud id velit cupidatat veniam deserunt.\r\n",
        "user": 550,
        "datetime": "Wed Dec 04 2002 08:25:01 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Lorem adipisicing voluptate dolor adipisicing dolore ipsum culpa ut eiusmod ea fugiat. Quis laboris velit nisi enim irure. Labore exercitation labore fugiat laborum mollit ut irure. Sunt proident aute id nostrud cillum cupidatat commodo sint id excepteur aute ut nulla. Irure aliqua ea et ut deserunt exercitation exercitation.\r\n",
        "user": 457,
        "datetime": "Sat Jun 12 1976 23:45:41 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Nulla non veniam proident non adipisicing enim sint non. Aute aute cupidatat cupidatat enim aute laboris eu sunt cillum veniam Lorem adipisicing et. Incididunt reprehenderit tempor excepteur eiusmod.\r\n",
        "user": 268,
        "datetime": "Wed Sep 28 1994 22:00:42 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Ullamco non laboris aliqua ex Lorem. Nisi non voluptate non nulla dolore laborum pariatur irure do. Cupidatat enim mollit enim pariatur sunt nulla quis ex aute. Officia commodo velit minim elit. Mollit cupidatat elit sunt amet aliqua nulla Lorem duis exercitation ex. Nulla nostrud culpa cillum laborum aliquip irure irure laborum consectetur nisi ut duis incididunt amet.\r\n",
        "user": 959,
        "datetime": "Sat Jun 04 1977 06:00:31 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Esse mollit dolor cupidatat esse duis aliquip aute exercitation est. Dolore est quis eu reprehenderit irure deserunt. Irure veniam est officia adipisicing reprehenderit elit proident nisi voluptate. Dolor non minim veniam commodo ut laboris.\r\n",
        "user": 138,
        "datetime": "Sun May 04 1986 14:08:33 GMT+0900 (Japan Standard Time)"
      }
    ]
  },
  {
    "id": "5c58de8dc48ab66ed8c3e072",
    "index": true,
    "item": "Nostrud labore id ipsum incididunt reprehenderit non est proident consequat ad est.",
    "project": "amet",
    "company": "Cubix",
    "user": 888,
    "datetime": "Thu Dec 18 1986 21:02:19 GMT+0900 (Japan Standard Time)",
    "comments": [
      {
        "comment": "Laborum ullamco excepteur velit cillum ea amet tempor irure consectetur et irure culpa veniam. Laboris occaecat minim id amet esse elit deserunt fugiat. Elit exercitation et do incididunt quis qui reprehenderit. Id nostrud deserunt fugiat incididunt quis sunt enim culpa reprehenderit occaecat cillum ea. Irure amet adipisicing est officia ex dolor magna anim anim proident ullamco ipsum in aute.\r\n",
        "user": 252,
        "datetime": "Sat Aug 24 1996 01:35:29 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Labore fugiat labore nisi esse consectetur. Veniam minim commodo pariatur sint. Et ipsum cupidatat deserunt eu. Occaecat nisi ut sunt in reprehenderit sint fugiat in incididunt cupidatat non tempor qui. Laboris culpa aliquip ad nulla nisi incididunt incididunt magna consequat commodo sunt occaecat. Enim non ullamco pariatur quis fugiat.\r\n",
        "user": 457,
        "datetime": "Sun Jul 24 1994 05:05:24 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Culpa ad ullamco sit quis nostrud consectetur pariatur nostrud nisi nostrud ullamco exercitation. Officia commodo sit incididunt labore veniam aliquip exercitation minim veniam duis cillum ut qui. Commodo est anim voluptate consectetur ipsum minim laboris enim nulla adipisicing non exercitation. Dolor laborum irure consequat commodo velit.\r\n",
        "user": 982,
        "datetime": "Sun Aug 08 2010 09:19:03 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Reprehenderit ad fugiat elit qui veniam enim ut laborum. Id adipisicing deserunt esse nulla consequat ex in est veniam aute minim. Pariatur qui non ea elit magna ad occaecat est pariatur tempor. Velit tempor tempor quis sint commodo sint ullamco. Nostrud anim ipsum incididunt sunt cupidatat nisi deserunt enim. Lorem consequat proident quis est veniam ea labore quis labore officia eu amet excepteur sunt.\r\n",
        "user": 475,
        "datetime": "Sun Nov 27 2011 11:56:32 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Id irure quis laboris occaecat ipsum quis qui Lorem occaecat. Adipisicing consequat excepteur Lorem cillum ex sunt magna ea sint sint. Enim ex est velit velit in dolor veniam. Incididunt cupidatat excepteur ipsum dolor aliqua minim est.\r\n",
        "user": 279,
        "datetime": "Mon Jun 16 1986 19:40:01 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Ea sunt minim adipisicing aliquip pariatur dolor cupidatat nisi Lorem culpa deserunt sunt ex. Ut nostrud dolore in cillum. Do aliqua aliqua irure minim nisi ea nostrud do ex aliquip quis voluptate elit.\r\n",
        "user": 456,
        "datetime": "Wed Jan 14 1998 13:23:40 GMT+0900 (Japan Standard Time)"
      }
    ]
  },
  {
    "id": "5c58de8d0ef5f623c7ea2906",
    "index": false,
    "item": "Excepteur labore aute sunt mollit et commodo sint ut ad excepteur velit incididunt Lorem.",
    "project": "sunt",
    "company": "Quonk",
    "user": 925,
    "datetime": "Mon Dec 30 1996 06:07:42 GMT+0900 (Japan Standard Time)",
    "comments": [
      {
        "comment": "Amet minim tempor qui duis. Sunt velit est dolor tempor deserunt ex sint cupidatat veniam. Nulla duis consectetur ad enim. Ullamco deserunt eiusmod minim aliquip et exercitation fugiat enim. Exercitation ullamco et fugiat consequat quis mollit deserunt. Nisi ea sit magna eiusmod amet nulla do ut labore.\r\n",
        "user": 384,
        "datetime": "Sat Jun 21 2008 18:57:25 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Duis elit aliqua mollit culpa reprehenderit minim. Exercitation do mollit adipisicing aute consectetur adipisicing do ullamco eu consequat ad. Ipsum sunt voluptate laboris officia esse ipsum nostrud exercitation tempor ipsum voluptate eiusmod. Dolore sint amet incididunt cillum amet officia magna minim cillum tempor. Consectetur magna elit esse voluptate adipisicing amet culpa esse quis enim esse.\r\n",
        "user": 797,
        "datetime": "Fri Oct 12 2007 10:28:45 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Dolor non deserunt do sint magna ad commodo magna voluptate quis consequat. Incididunt est adipisicing in ullamco nostrud Lorem consequat. Aliqua nisi sunt non tempor voluptate non duis. Cillum in nisi ut eu excepteur elit non Lorem irure sunt pariatur pariatur labore. Cillum eiusmod nostrud anim enim fugiat voluptate Lorem anim labore dolor mollit minim dolore proident. Aliqua culpa eiusmod dolor qui sit dolore commodo veniam occaecat voluptate. Non eu culpa esse culpa dolore aute mollit ipsum.\r\n",
        "user": 942,
        "datetime": "Mon Jun 30 1975 15:21:39 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Incididunt ea mollit aliqua eiusmod ullamco reprehenderit ipsum fugiat culpa nostrud adipisicing ea. Proident fugiat quis duis cupidatat eu ex dolore qui ex. Voluptate eiusmod reprehenderit esse irure ullamco voluptate sint in dolore quis enim minim.\r\n",
        "user": 351,
        "datetime": "Sat Nov 18 2017 05:04:37 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Amet exercitation voluptate ullamco amet velit ea esse fugiat pariatur aliqua deserunt non. Ea velit ad labore eiusmod quis irure in esse esse tempor. Dolore duis occaecat Lorem voluptate culpa quis in est reprehenderit minim mollit quis pariatur.\r\n",
        "user": 755,
        "datetime": "Fri Aug 31 1979 05:51:17 GMT+0900 (Japan Standard Time)"
      }
    ]
  },
  {
    "id": "5c58de8dda9c6a68d12d18d9",
    "index": false,
    "item": "Anim Lorem reprehenderit nisi ex ut aute aute ea quis.",
    "project": "sunt",
    "company": "Geeketron",
    "user": 875,
    "datetime": "Fri Dec 26 2014 13:15:13 GMT+0900 (Japan Standard Time)",
    "comments": [
      {
        "comment": "Ut ipsum id commodo cillum aliqua. Reprehenderit commodo in non irure enim commodo aliquip et eu sunt magna nulla ad eu. Ipsum sunt aliquip fugiat et est deserunt ex nisi dolor do nulla. Ipsum nulla occaecat Lorem occaecat dolor ex magna sit Lorem sunt.\r\n",
        "user": 703,
        "datetime": "Sun Mar 21 1999 11:46:24 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Aliquip eu sunt magna non minim. Consequat ad ea culpa mollit magna adipisicing qui ipsum esse qui ut. Incididunt voluptate et do nostrud eu est aliquip tempor nostrud enim consequat fugiat aute. Ullamco cupidatat ipsum qui ullamco dolore pariatur officia.\r\n",
        "user": 720,
        "datetime": "Sun Oct 13 1991 00:52:18 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Quis ut dolore qui dolor eu reprehenderit mollit dolor reprehenderit. Occaecat esse anim consequat quis reprehenderit mollit excepteur excepteur irure. Eu voluptate quis eu magna ex. Aliquip esse mollit voluptate nulla do ea mollit dolor non consequat consequat irure et est.\r\n",
        "user": 377,
        "datetime": "Sat Jun 07 2014 04:34:05 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Qui eu do est mollit sint duis ipsum adipisicing velit nisi. Anim laboris proident eu dolor culpa occaecat. Veniam et nulla amet aliquip culpa veniam officia mollit enim sunt ad est. Voluptate ut ad deserunt ea ipsum nulla proident exercitation deserunt magna irure aute anim proident. Est qui exercitation fugiat ex do. Anim sint ipsum non laborum amet anim sint. Elit officia anim sint cupidatat.\r\n",
        "user": 605,
        "datetime": "Fri Apr 21 2000 08:50:02 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Quis non consequat aliqua qui excepteur ipsum ipsum. Cillum adipisicing exercitation enim adipisicing aute. Eu proident ut deserunt exercitation velit ut minim proident labore nulla labore proident cillum sint. Nostrud nulla esse irure esse esse laborum cillum mollit anim. Officia esse voluptate anim ut laborum adipisicing non deserunt cupidatat veniam. Incididunt ipsum magna quis esse eiusmod id non ipsum sit. Non velit incididunt sunt sit aliqua enim non.\r\n",
        "user": 622,
        "datetime": "Fri Apr 25 1997 05:23:10 GMT+0900 (Japan Standard Time)"
      }
    ]
  },
  {
    "id": "5c58de8df961348d6ceb334a",
    "index": false,
    "item": "Aliqua in ea ullamco deserunt consequat et commodo.",
    "project": "deserunt",
    "company": "Hawkster",
    "user": 981,
    "datetime": "Sun Dec 20 1992 22:48:59 GMT+0900 (Japan Standard Time)",
    "comments": [
      {
        "comment": "Non exercitation cillum non ullamco Lorem cupidatat reprehenderit ea nisi. Anim consequat qui enim in cupidatat consequat officia. Ut ea nostrud anim veniam. Magna culpa nisi Lorem commodo aliqua ex Lorem. Ullamco quis culpa sit pariatur incididunt exercitation non dolore elit fugiat reprehenderit. Id incididunt culpa minim pariatur nulla deserunt irure commodo exercitation et enim.\r\n",
        "user": 202,
        "datetime": "Sat Feb 24 1979 22:42:10 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Sunt amet veniam minim ullamco velit ullamco ullamco proident. Eiusmod adipisicing et minim mollit irure eu magna aliquip laboris fugiat ipsum ut. Amet ut anim dolor cillum quis eu ex dolor. Mollit laboris incididunt voluptate reprehenderit qui ipsum occaecat eu reprehenderit proident.\r\n",
        "user": 120,
        "datetime": "Thu Apr 16 2009 02:05:42 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Tempor pariatur fugiat reprehenderit tempor eu non nostrud magna cillum incididunt. Ad duis eu mollit esse consectetur ut veniam laborum exercitation. Aute anim esse sint exercitation ex occaecat. Exercitation occaecat enim ea ut quis dolor do dolor cupidatat sunt adipisicing. Cupidatat ipsum sint ullamco id qui deserunt ea.\r\n",
        "user": 896,
        "datetime": "Fri Aug 15 1986 18:11:28 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Sunt excepteur exercitation eu eiusmod consectetur eu nisi deserunt cupidatat mollit labore sint. Ipsum ea nisi in incididunt minim. Culpa deserunt et consectetur occaecat deserunt nostrud tempor. In consequat consectetur velit veniam qui. Ipsum labore culpa ad reprehenderit.\r\n",
        "user": 330,
        "datetime": "Fri Dec 05 1980 20:25:48 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Dolore dolor fugiat ipsum elit consectetur enim velit commodo ea incididunt sint consequat amet aliqua. Quis incididunt eu et sint dolor est. Nostrud irure ullamco incididunt ea tempor veniam fugiat nostrud officia nulla. Ullamco est labore enim elit minim sint Lorem sit magna occaecat dolore non. Anim proident dolor eiusmod velit exercitation officia labore dolor.\r\n",
        "user": 51,
        "datetime": "Tue Apr 21 1987 13:01:10 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Officia elit amet velit minim aute ipsum est aliqua sint consectetur. Nisi esse proident Lorem dolor enim nostrud fugiat labore. Duis velit ad aute dolor voluptate labore nulla occaecat sit eu excepteur ipsum et. Ipsum voluptate ut veniam ad tempor duis labore do dolor qui. Ullamco veniam dolore in voluptate deserunt duis elit.\r\n",
        "user": 868,
        "datetime": "Tue Jul 17 2001 17:37:05 GMT+0900 (Japan Standard Time)"
      },
      {
        "comment": "Exercitation et anim dolore reprehenderit aliqua ex exercitation qui enim est minim tempor ea elit. Aute elit non ipsum quis voluptate duis duis ad laboris officia labore nisi. Ex culpa veniam voluptate excepteur excepteur cillum ex cillum mollit qui pariatur officia anim. Et et nisi qui eiusmod anim non duis aliquip dolor minim ea tempor. Ea elit esse consectetur irure id magna occaecat. Deserunt aliquip velit occaecat in eiusmod.\r\n",
        "user": 772,
        "datetime": "Tue Nov 27 1984 20:15:50 GMT+0900 (Japan Standard Time)"
      }
    ]
  }
];
var mySpan = function (newId) {

  var el01 = document.createElement('span');
  el01.classList.add('editing');
  el01.classList.add('punch-wrap');

  var el02 = document.createElement('input');
  el02.type = 'checkbox';
  el02.id = newId;

  var el03 = document.createElement('label');
  el03.htmlFor = newId;
  el03.classList.add('punch');

  var el04 = document.createElement('i');
  el04.classList.add('fa');
  el04.classList.add('fa-check');

  var el05 = document.createElement('input');
  el05.type = 'text';
  el05.id = newId;
  el05.classList.add('input-punch');
  el05.id = 'input-punch' + newId;

  el03.appendChild(el04); // <label>{HERE}</label>
  el03.appendChild(el05); // <label><i></i>{HERE}</label>

  el01.appendChild(el02); // <span>{HERE}</span>
  el01.appendChild(el03); // <span><input />{HERE}</span>

  return el01;

}
// console.log({data});


// add items
$('#add-punch').click(function () {
  var lastSibling = $('#punch-list > .punch-wrap:last-of-type > input').attr('id') || "0";
  var newId = Number(lastSibling) + 1;

  $(this).before(mySpan(newId));

  $('#input-punch' + newId + '').parent().parent().animate({
    height: "36px"
  }, 200)
  $('#input-punch' + newId + '').focus();

  $('#input-punch' + newId + '').enterKey(function () {
    $(this).trigger('enterEvent');
  })

  $('#input-punch' + newId + '').on('blur enterEvent', function () {
    var random = Math.floor(Math.random() * postdata.length);
    var punchTitle = $('#input-punch' + newId + '').val();
    var punchTitleLength = punchTitle.length;
    if (punchTitleLength > 0) {
      $(this).before(punchTitle);
      $(this).parent().parent().removeClass('editing');
      $(this).parent().after('<span class="delete-item" title="remove"><i class="fa fa-times-circle"></i></span>');
      $(this).parent().parent().append(`<div style="width:100%;margin: 3% 0 3% 0;">
     <div class="keyvalue">Project:${postdata[random].project}</div>
    <div class="keyvalue">Company:${postdata[random].company}</div>
    <div class="keyvalue">User:${postdata[random].user}</div>
    <div class="keyvalue">Datetime:${postdata[random].datetime}</div>
  </div>`);
      $(this).parent().parent().append(`<div><input type="text" onkeypress="addComment(this.value,this.id,event)" id="i-${newId}" class="comment-input" placeholder="comment here..."></div><div class="comment-box" id="cm-${newId}"></div>`);

      $(this).remove();
      $('.delete-item').click(function () {
        var parentItem = $(this).parent();
        parentItem.animate({
          left: "-30%",
          height: 0,
          opacity: 0
        }, 200);
        setTimeout(function () { $(parentItem).remove(); }, 1000);
      });
    }
    else {
      $('.editing').animate({
        height: '0px'
      }, 200);
      setTimeout(function () {
        $('.editing').remove()
      }, 400)
    }
  })

});

// remove items 

$('.delete-item').click(function () {
  var parentItem = $(this).parent();
  parentItem.animate({
    left: "-30%",
    height: 0,
    opacity: 0
  }, 200);
  setTimeout(function () { $(parentItem).remove(); }, 1000);
});

// Enter Key detect

$.fn.enterKey = function (fnc) {
  return this.each(function () {
    $(this).keypress(function (ev) {
      var keycode = (ev.keyCode ? ev.keyCode : ev.which);
      if (keycode == '13') {
        fnc.call(this, ev);
      }
    })
  })
}
function addComment(val, id, ev) {
  var currentdate = new Date();
  var datetime = currentdate.getDate() + "/"
    + (currentdate.getMonth() + 1) + "/"
    + currentdate.getFullYear() + " @ "
    + currentdate.getHours() + ":"
    + currentdate.getMinutes() + ":"
    + currentdate.getSeconds();
  var id = id.split("-")[1];
  if (ev.keyCode == 13 || ev.which == 13) {
    $("#cm-" + id).prepend(`<div class="user">
    <i class="fa fa-user-circle-o"></i>
    <span>User</span><span class="date">${datetime}</span>
     <span class="junk">
      ${val}
  </span>
  </div>`);
    if ($("#cm-" + id).children().length == 2) {
      $("#cm-" + id).parent().append("<a class='a more' onclick='moreless(this)'>show more...<a>");
    }
    if ($("#cm-" + id).children().length > 1) {
      $("#cm-" + id).children().hide();
      $("#cm-" + id).children().first().show();
    }
    $("#i-"+id).val("");
  }
}


function moreless(ref) {
  if ($(ref).hasClass("more")) {
    $(ref).text("Show less..");
    $(ref).removeClass("more");
    $(ref).addClass("less");
    $(ref).prev().children().show();
  } else {
    $(ref).text("Show more..");
    $(ref).removeClass("less");
    $(ref).addClass("more");
    $(ref).prev().children().hide();
    $(ref).prev().children().first().show();
  }

}
